<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="color-scheme" content="light dark">
    <meta name="supported-color-schemes" content="light dark">
    <title>Weather Report</title>

    <style type="text/css">
        body { 
            margin: 0; padding: 0; 
            font-family: 'Segoe UI', Arial, sans-serif; 
            background-color: #f6f9fc;
        }

        a { text-decoration: none; }

        /* RESPONSIVE FIX */
        .container {
            width: 100% !important;
            max-width: 600px !important;
        }
        .inner-padding {
            padding: 25px 20px !important;
        }

        @media only screen and (max-width: 600px) {
            .container {
                width: 100% !important;
                max-width: 100% !important;
            }
            .inner-padding {
                padding: 20px !important;
            }
        }

        /* DARK MODE SUPPORT */
        @media (prefers-color-scheme: dark) {
            .body-bg { background-color: #1a202c !important; }
            .card-bg { background-color: #2d3748 !important; border: 1px solid #4a5568 !important; }
            .text-primary { color: #ffffff !important; }
            .text-secondary { color: #a0aec0 !important; }
            .border-line { border-bottom: 1px solid #4a5568 !important; }
            .btn-bg { background-color: #63b3ed !important; color: #1a202c !important; }
        }
    </style>
</head>

<body class="body-bg" style="margin: 0; padding: 0; background-color: #f6f9fc;">

    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="padding: 40px 0; background-color: #f6f9fc;">
        <tr>
            <td align="center">

                <!-- MAIN CARD -->
                <table class="card-bg container" 
                       border="0" cellpadding="0" cellspacing="0" 
                       width="100%" 
                       style="max-width:600px; background-color: #ffffff; border-radius: 12px; border:1px solid #e1e4e8; overflow:hidden;">

                    <!-- HEADER -->
                    <tr>
                        <td class="border-line" align="center" style="padding: 35px 0 25px 0; border-bottom: 2px solid #f0f0f0;">
                            <h2 class="text-primary" style="margin: 0; color: #1a202c; font-size: 26px; font-weight: 700;">
                                Weather Daily
                            </h2>
                            <p class="text-secondary" style="margin: 5px 0 0 0; color: #718096; font-size: 14px;">
                                Smart insights for your top cities
                            </p>
                        </td>
                    </tr>

                    <!-- CITY LIST -->
                    <tr th:each="city : ${cityList}">
                        <td class="border-line inner-padding" style="border-bottom: 1px solid #f0f0f0;">
                            
                            <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                <tr>

                                    <!-- LEFT TEXT -->
                                    <td valign="middle" style="padding-right: 10px; width:70%;">
                                        <p class="text-primary"
                                           style="margin: 0; font-size: 18px; font-weight: 600; color: #2d3748; line-height: 1.2;"
                                           th:text="${city.cityName}">
                                            City Name
                                        </p>

                                        <p class="text-secondary"
                                           style="margin: 4px 0 0 0; font-size: 14px; color: #718096; line-height: 1.4;"
                                           th:text="${city.weatherType}">
                                            Weather Type
                                        </p>

                                        <p style="margin: 8px 0 0 0; font-size: 13px; font-style: italic; line-height: 1.4;"
                                           th:styleappend="'color: ' + ${city.adviceColor}"
                                           th:text="${city.advice}">
                                            Advice text goes here.
                                        </p>
                                    </td>

                                    <!-- RIGHT TEMP -->
                                    <td valign="middle" align="right" style="width:30%;">
                                        <span class="text-primary"
                                              style="font-size: 28px; font-weight: bold; color: #2d3748; line-height: 1;"
                                              th:text="${city.temperature} + '°'">
                                            0°
                                        </span>
                                        <span class="text-secondary"
                                              style="font-size: 16px; color: #a0aec0; vertical-align: top;">
                                            C
                                        </span>
                                    </td>

                                </tr>
                            </table>

                        </td>
                    </tr>

                    <!-- DOWNLOAD BUTTON -->
                    <tr>
                        <td align="center" style="padding: 40px;" class="card-bg">
                            <a th:href="@{${downloadLink}}"
                               class="btn-bg"
                               style="background-color: #3182ce; color: #ffffff; padding: 14px 28px; border-radius: 6px; font-weight: bold; font-size: 15px; display: inline-block;">
                                Download Full Report
                            </a>
                        </td>
                    </tr>

                </table>

                <!-- FOOTER -->
                <table class="container" border="0" cellpadding="0" cellspacing="0" width="100%" style="max-width:600px;">
                    <tr>
                        <td align="center" style="padding: 20px; color: #718096; font-size: 12px;">
                            &copy; 2025 Global Weather Service.
                        </td>
                    </tr>
                </table>

            </td>
        </tr>
    </table>
</body>
</html>
